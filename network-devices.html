<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de">
<head>
<!-- 2024-06-14 Fr 10:20 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dokumentation für HP-Switch (2530) und HP-Router (MSR1003)</title>
<meta name="author" content="Lukas Singer" />
<meta name="description" content="CLI-Referenz und Dokumentation für HP-Switch (2530) und HP-Router (MSR 1003)" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" href="styles/main.css" />
<link rel="stylesheet" href="styles/stackoverflow-dark.min.css" />
<script src="scripts/highlight.min.js" type="text/javascript"></script>
<script src="scripts/main.js" type="text/javascript"></script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="index.html"> UP </a>
 |
 <a accesskey="H" href="index.html"> HOME </a>
</div><div id="content" class="content">
<h1 class="title">Dokumentation für HP-Switch (2530) und HP-Router (MSR1003)</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Inhaltsverzeichnis</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org53d8838">1. Über diese Dokumentation</a>
<ul>
<li><a href="#org859261a">1.1. Synopsis</a></li>
<li><a href="#org3ae87de">1.2. Tags (<code>TBV</code>, <code>INC</code>, <code>ERR</code>)</a></li>
<li><a href="#org0553de1">1.3. Tabulator <code>&lt;TAB&gt;</code> und Fragezeichen <code>&lt;?&gt;</code></a></li>
</ul>
</li>
<li><a href="#orgfbff79c">2. CLI-Verbindung herstellen</a>
<ul>
<li><a href="#org161098b">2.1. Mac OS</a>
<ul>
<li><a href="#org2a34ee9">2.1.1. Serielle Verbindung</a></li>
<li><a href="#orgbf9b1fb">2.1.2. <span class="todo TBV">TBV</span> SSH Verbindung</a></li>
</ul>
</li>
<li><a href="#org5357e41">2.2. Linux</a>
<ul>
<li><a href="#org6b66ce4">2.2.1. Serielle Verbindung</a></li>
<li><a href="#orgd5b1ac7">2.2.2. SSH Verbindung</a></li>
</ul>
</li>
<li><a href="#org54d2636">2.3. Windows</a>
<ul>
<li><a href="#org0454113">2.3.1. Serielle Verbindung</a></li>
<li><a href="#orgd66b8fa">2.3.2. <span class="todo TBV">TBV</span> SSH Verbindung</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgb62d244">3. Switch (HP 2530-24G)</a>
<ul>
<li><a href="#org1728f1d">3.1. Zurücksetzen</a>
<ul>
<li><a href="#orgb3d5896">3.1.1. Löschen der aktuellen Konfiguration</a></li>
<li><a href="#orgdc7c565">3.1.2. Reset via <code>Monitor ROM Console</code></a></li>
<li><a href="#org1490ed3">3.1.3. Hardreset (!)</a></li>
</ul>
</li>
<li><a href="#org39a36bc">3.2. Modes</a></li>
<li><a href="#orgdec1f2d">3.3. Default Boot Image wählen</a></li>
<li><a href="#org8b626de">3.4. Config File</a>
<ul>
<li><a href="#org3eca94f">3.4.1. Anzeigen</a></li>
<li><a href="#org1f1c4f3">3.4.2. Zurücksetzen</a></li>
<li><a href="#orgdca92c7">3.4.3. Speichern</a></li>
<li><a href="#org18cb4af">3.4.4. Backup</a></li>
<li><a href="#orgf6f1c11">3.4.5. Restore</a></li>
</ul>
</li>
<li><a href="#org8dafee8">3.5. IP</a>
<ul>
<li><a href="#org7b54504">3.5.1. Statisch</a></li>
<li><a href="#org524ec41">3.5.2. Dynamisch</a></li>
</ul>
</li>
<li><a href="#org8fbdf5c">3.6. SSH Zugang</a></li>
<li><a href="#org46bdae7">3.7. MAC-Address-Table</a></li>
<li><a href="#orgee748c5">3.8. Mirror Port</a></li>
<li><a href="#orgf37598d">3.9. Spanning Tree</a></li>
</ul>
</li>
<li><a href="#org71c9383">4. <span class="todo INC">INC</span> Router (HP MSR 1003)</a>
<ul>
<li><a href="#org5b67e41">4.1. <span class="todo TBV">TBV</span> Modes</a></li>
<li><a href="#org943af50">4.2. Dateien und Verzeichnise</a></li>
<li><a href="#org60e3612">4.3. TTL-Expires</a></li>
<li><a href="#org8cd3f19">4.4. SSH Zugang</a></li>
<li><a href="#orgf838385">4.5. <span class="todo TBV">TBV</span> Config File</a>
<ul>
<li><a href="#org97125fb">4.5.1. Anzeigen</a></li>
<li><a href="#orgf76e080">4.5.2. Zurücksetzen</a></li>
<li><a href="#org12e674f">4.5.3. Speichern</a></li>
<li><a href="#org95b45e1">4.5.4. Backup</a></li>
</ul>
</li>
<li><a href="#org77b9b78">4.6. <span class="todo TBV">TBV</span> Interfaces</a>
<ul>
<li><a href="#org7ead16d">4.6.1. Informationen anzeigen</a></li>
<li><a href="#orgeed72fa">4.6.2. Mode</a></li>
<li><a href="#orgb9c76a8">4.6.3. IP</a></li>
</ul>
</li>
<li><a href="#org9235344">4.7. Routing</a>
<ul>
<li><a href="#org66ae342">4.7.1. Statisch</a></li>
<li><a href="#orgf88cfcf">4.7.2. Dynamisch</a></li>
<li><a href="#org5d49bf3">4.7.3. Routing Tabelle anzeigen</a></li>
</ul>
</li>
<li><a href="#org0d01f77">4.8. <span class="todo TBV">TBV</span> NAT, PAT</a>
<ul>
<li><a href="#orgc1c31ff">4.8.1. 1:1 statisches NAT</a></li>
<li><a href="#orga2061c3">4.8.2. Dynamisches NAT</a></li>
<li><a href="#org838e25d">4.8.3. PAT</a></li>
<li><a href="#org23c8bc1">4.8.4. Anzeigen, Debugging</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org826d905">5. Credits</a></li>
</ul>
</div>
</div>

<div id="outline-container-org53d8838" class="outline-2">
<h2 id="org53d8838"><span class="section-number-2">1.</span> Über diese Dokumentation</h2>
<div class="outline-text-2" id="text-1">
<p>
Diese Dokumentation dient dem Laborunterricht an der <a href="https://www.eke.at">Tiroler Fachberufsschule für Elektrotechnik, Kommunikation und Elektronik (tfbs-eke)</a> in den IT-Berufen.
Es werden die wichtigsten (am häufigsten benötigten CLI-Befehle für die an der Schule verwendeten Netzwerkgeräte (Switches, Router) kurz und knapp beschrieben.
Diese Dokumentation ersetzt nicht die Datenblätter/Manuals/Dokumentationen der jeweiligen Netzwerkgeräte.
</p>

<p>
Diese Dokumentation ist Work-In-Progress und kann (wird!) "Fehler" enthalten und "unvollständig" sein.
</p>

<p>
<b>Viel Spaß und viel Erfolg bei den Laborübungen!</b>
</p>
</div>

<div id="outline-container-org859261a" class="outline-3">
<h3 id="org859261a"><span class="section-number-3">1.1.</span> Synopsis</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Befehle werden folgendermaßen Dargestellt:
</p>
<pre class="example" id="orgeaa1a52">
(config)# vlan  VLAN
(vlan-1)# ip address  IP  SNM
</pre>

<p>
am Anfang der Zeile steht immer der für den Befehl (hier: <code>vlan</code> bzw. <code>ip address</code>) benötigte Prompt (hier: <code>(config)#</code> bzw. <code>(vlan-1)#</code>; möglicherweise muss dazu in den gewünschten Modus/Interface/&#x2026; gewechselt werden) gefolgt von Parametern (hier: <code>VLAN</code> bzw. <code>IP  SNM</code>).
</p>

<p>
Die Parameter (meist in Großbuchstaben und mit doppelten Leerzeichen eingefasst) müssen durch die gewünschten "Werte" ersetzt werden. Die Tatsächliche Eingabe sieht dann beispielsweise so aus:
</p>
<pre class="example" id="org3ac4cf2">
(config)# vlan 1
(vlan-1)# ip address 192.168.42.1 255.255.255.0
</pre>
</div>
</div>

<div id="outline-container-org3ae87de" class="outline-3">
<h3 id="org3ae87de"><span class="section-number-3">1.2.</span> Tags (<code>TBV</code>, <code>INC</code>, <code>ERR</code>)</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Der Tag <b><code>TBV</code></b> in einer Überschrift steht für <code>*T*o *B*e *V*erified</code> und bedeutet, dass der folgende Abschnitt nicht ausreichend getestet ist.
</p>

<p>
Der Tag <b><code>INC</code></b> in einer Überschrift steht für <code>*Inc*omplete</code> und bedeutet, dass der folgende Abschnitt nicht vollständig ist.
</p>

<p>
Der Tag <b><code>ERR</code></b> in einer Überschrift steht für <code>*Err*or</code> und bedeutet, dass der folgende Abschnitt bekannte Fehler enthält.
</p>
</div>
</div>

<div id="outline-container-org0553de1" class="outline-3">
<h3 id="org0553de1"><span class="section-number-3">1.3.</span> Tabulator <code>&lt;TAB&gt;</code> und Fragezeichen <code>&lt;?&gt;</code></h3>
<div class="outline-text-3" id="text-1-3">
<p>
Bei der Abreit mit dem <b><code>CLI</code></b> (Command Line Interface) sollte man sich unbeding angewöhnen viel <code>TAB</code> und <code>?</code> zu verwenden.
</p>

<ul class="org-ul">
<li><code>TAB</code>: vervollständigt einen Bereits teilweise eingegebenen Befehl oder schlägt eine Liste an möglichen Vervollständigungen vor.</li>
<li><code>?</code>: Listet alle an der aktuellen Curserposition sinnvollen Eingebemöglichkeiten auf.</li>
</ul>

<p>
Beispiel:
</p>
<pre class="example" id="org2892f73">
(vlan-1)# ip &lt;?&gt;
  access-group          Apply the specified IPv4 ACL on this VLAN interface.
  address               Set IP parameters for communication within an IP 
                        network.
  bootp-gateway         Set the gateway address to be used for stamping incoming
                        DHCP requests.
  helper-address        Add a DHCP server IP address for the VLAN.
  igmp                  Enable/disable/configure IP Multicast Group Protocol 
                        (IGMP) feature on a VLAN.

(vlan-1)# ip ad&lt;TAB&gt;  
(vlan-1)# ip address
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfbff79c" class="outline-2">
<h2 id="orgfbff79c"><span class="section-number-2">2.</span> CLI-Verbindung herstellen</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org161098b" class="outline-3">
<h3 id="org161098b"><span class="section-number-3">2.1.</span> Mac OS</h3>
<div class="outline-text-3" id="text-2-1">
</div>
<div id="outline-container-org2a34ee9" class="outline-4">
<h4 id="org2a34ee9"><span class="section-number-4">2.1.1.</span> Serielle Verbindung</h4>
<div class="outline-text-4" id="text-2-1-1">
<pre class="example" id="orgd386e89">
$ sudo screen /dev/cu.usbserial-110
</pre>

<p>
Zum lösen (detach) der Verbindung: <code>Ctrl-a Ctrl-d</code>
</p>

<p>
Kann mit <code>sudo screen -r</code> wieder aufgebaut (reconnected) werden.
</p>

<p>
Zum beenden der Verbindung: <code>Ctrl-a \</code>
</p>

<p>
USB-Seriell-Adapter werden unter Mac OS <i>typischerweise</i> als Gerätedatei <code>/dev/cu.XXXXXX</code> dargestellt.
Mit dem Befehl <code>ls /dev/cu.*</code> werden alle Gerätedateien aufgelistet, die diesem Muster entsprechen.
Die Gewünschte Gerätedatei ist jene, die beim Ein-/Ausstecken des USB-Seriell-Adapters hinzukommt bzw. wegfällt.
</p>
</div>
</div>

<div id="outline-container-orgbf9b1fb" class="outline-4">
<h4 id="orgbf9b1fb"><span class="section-number-4">2.1.2.</span> <span class="todo TBV">TBV</span> SSH Verbindung</h4>
<div class="outline-text-4" id="text-2-1-2">
<pre class="example" id="org5f0684e">
$ ssh  IP
</pre>
</div>
</div>
</div>

<div id="outline-container-org5357e41" class="outline-3">
<h3 id="org5357e41"><span class="section-number-3">2.2.</span> Linux</h3>
<div class="outline-text-3" id="text-2-2">
</div>
<div id="outline-container-org6b66ce4" class="outline-4">
<h4 id="org6b66ce4"><span class="section-number-4">2.2.1.</span> Serielle Verbindung</h4>
<div class="outline-text-4" id="text-2-2-1">
<pre class="example" id="org8707234">
$ sudo screen /dev/ttyUSB0
</pre>

<p>
Zum lösen (detach) der Verbindung: <code>Ctrl-a Ctrl-d</code>.
Diese kann dann mit <code>sudo screen -r</code> wieder aufgebaut (reconnected) werden.
</p>

<p>
Zum beenden der Verbindung: <code>Ctrl-a \</code>
</p>

<p>
Möchte man mit dem eigenen User (also nicht als <i>root</i> und ohne dem Befehl <code>sudo</code>) eine serielle Verbindung nutzen,
kann man den eigenen User der Gruppe <code>dialout</code> hinzufügen:
</p>
<pre class="example" id="org7bf34df">
$ sudo usermod -aG dialout $USERNAME
</pre>
<p>
Nach dem nächsten Login kann die serielle Verbindung ohne <code>sudo</code> geöffnet werden.
</p>
</div>
</div>

<div id="outline-container-orgd5b1ac7" class="outline-4">
<h4 id="orgd5b1ac7"><span class="section-number-4">2.2.2.</span> SSH Verbindung</h4>
<div class="outline-text-4" id="text-2-2-2">
<p>
Aufgrund von "veralteten" Schlüsselaustausch und Verschlüsselungsverfahren seitens des Switches funktioniert ein einfaches
</p>
<pre class="example" id="org35c8aaa">
$ ssh  IP
</pre>
<p>
nicht.
</p>

<p>
Die Lösung sieht dann so, oder so ähnlich aus:
</p>
<pre class="example" id="org3535d7a">
$ ssh -oKexAlgorithms=+diffie-hellman-group14-sha1 -oHostKeyAlgorithms=ssh-rsa   IP
</pre>
</div>
</div>
</div>

<div id="outline-container-org54d2636" class="outline-3">
<h3 id="org54d2636"><span class="section-number-3">2.3.</span> Windows</h3>
<div class="outline-text-3" id="text-2-3">
</div>
<div id="outline-container-org0454113" class="outline-4">
<h4 id="org0454113"><span class="section-number-4">2.3.1.</span> Serielle Verbindung</h4>
<div class="outline-text-4" id="text-2-3-1">
<p>
Am besten mittels <a href="https://putty.org/">PuTTY</a>. Dort "Serial" auswählen, den COM-Port eingeben und "Open" klicken.
</p>
</div>
</div>

<div id="outline-container-orgd66b8fa" class="outline-4">
<h4 id="orgd66b8fa"><span class="section-number-4">2.3.2.</span> <span class="todo TBV">TBV</span> SSH Verbindung</h4>
<div class="outline-text-4" id="text-2-3-2">
<p>
Entweder mittels <a href="https://putty.org/">PuTTY</a>. Dort "SSH" auswählen, die IP-Adresse des Switches und den Port (standardmäßig: <code>22</code>) eingeben und "Open" klicken.
</p>

<p>
Oder über <code>cmd</code> bzw. <code>PowerShell</code>:
</p>
<pre class="example" id="orgd87200d">
C:\&gt; ssh  IP
</pre>

<p>
Tritt eine Fehlermeldung bzgl. inkompatibler Schlüsselaustauschverfahren auf, <span class="underline">kann</span> folgender Befehl helfen:
</p>
<pre class="example" id="org8d80114">
C:\&gt; ssh -oKexAlgorithms=+diffie-hellman-group14-sha1 -oHostKeyAlgorithms=ssh-rsa   IP
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-orgb62d244" class="outline-2">
<h2 id="orgb62d244"><span class="section-number-2">3.</span> Switch (HP 2530-24G)</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org1728f1d" class="outline-3">
<h3 id="org1728f1d"><span class="section-number-3">3.1.</span> Zurücksetzen</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Vor und nach jeder Laborübung sollten die Switches zurückgesetzt werden, damit jede:r Schüler:in mit einem <i>frischen</i> (unkonfigurierten) Switch arbeiten kann.
</p>
</div>

<div id="outline-container-orgb3d5896" class="outline-4">
<h4 id="orgb3d5896"><span class="section-number-4">3.1.1.</span> Löschen der aktuellen Konfiguration</h4>
<div class="outline-text-4" id="text-3-1-1">
<pre class="example" id="orgf310f95">
# erase startup-config
</pre>
</div>
</div>

<div id="outline-container-orgdc7c565" class="outline-4">
<h4 id="orgdc7c565"><span class="section-number-4">3.1.2.</span> Reset via <code>Monitor ROM Console</code></h4>
<div class="outline-text-4" id="text-3-1-2">
<p>
Serielle Verbindung aufbauen bevor der Switch eingeschaltet (eingesteckt) wurde.
Beim Bootvorgang nach aufforderung <code>0. Monitor ROM Console</code> wählen ("schnell" automatisch wird typischerweise <code>1. Primary Software Image</code> nach wenigen Sekunden ausgewählt).
</p>

<pre class="example" id="org8dfbbdd">
=&gt; erase-all
</pre>

<p>
Dann bootet der Switch neu und es sollte kein Username/Passwort mehr gesetzt sein. Nicht wundern, der Reboot dauert etwas länger als gewohnt (ca. 2 Minuten).
</p>
</div>
</div>

<div id="outline-container-org1490ed3" class="outline-4">
<h4 id="org1490ed3"><span class="section-number-4">3.1.3.</span> Hardreset (!)</h4>
<div class="outline-text-4" id="text-3-1-3">
<p>
<b>Achtung!</b> Das sollte nur die letzte Möglichkeit sein! Wenn irgendwie möglich sollten die Switches Softwaremäßig (Löschen der Konfiguration, Booten der ROM Console, &#x2026;) zurückgesetzt werden.
</p>

<ul class="org-ul">
<li><code>Button RESET</code> und <code>Button CLEAR</code> drücken und gedrückt halten</li>
<li><code>Button RESET</code> loslassen (<code>Button CLEAR</code> weite halten)</li>
<li>Sobald <code>Led TEST</code> blinkt kann auch <code>Button CLEAR</code> losgelassen werden</li>
<li>Der Switch Rebootet mit Factory Settings</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-org39a36bc" class="outline-3">
<h3 id="org39a36bc"><span class="section-number-3">3.2.</span> Modes</h3>
<div class="outline-text-3" id="text-3-2">
<pre class="example" id="orgb05ec32">
# system-view
(config)#
</pre>
</div>
</div>

<div id="outline-container-orgdec1f2d" class="outline-3">
<h3 id="orgdec1f2d"><span class="section-number-3">3.3.</span> Default Boot Image wählen</h3>
<div class="outline-text-3" id="text-3-3">
<pre class="example" id="org2701111">
# boot set-default flash  IMAGE
</pre>
<p>
Für <code>IMAGE</code> muss <code>primary</code> oder <code>secondary</code> ausgewählt werden.
</p>
</div>
</div>

<div id="outline-container-org8b626de" class="outline-3">
<h3 id="org8b626de"><span class="section-number-3">3.4.</span> Config File</h3>
<div class="outline-text-3" id="text-3-4">
</div>
<div id="outline-container-org3eca94f" class="outline-4">
<h4 id="org3eca94f"><span class="section-number-4">3.4.1.</span> Anzeigen</h4>
<div class="outline-text-4" id="text-3-4-1">
<pre class="example" id="org9c9740c">
# display current-configuration
</pre>
</div>
</div>
<div id="outline-container-org1f1c4f3" class="outline-4">
<h4 id="org1f1c4f3"><span class="section-number-4">3.4.2.</span> Zurücksetzen</h4>
<div class="outline-text-4" id="text-3-4-2">
<pre class="example" id="org0dcbd76">
# erase startup-config
</pre>
</div>
</div>
<div id="outline-container-orgdca92c7" class="outline-4">
<h4 id="orgdca92c7"><span class="section-number-4">3.4.3.</span> Speichern</h4>
<div class="outline-text-4" id="text-3-4-3">
<pre class="example" id="org5dcc739">
# wr mem
</pre>
</div>
</div>
<div id="outline-container-org18cb4af" class="outline-4">
<h4 id="org18cb4af"><span class="section-number-4">3.4.4.</span> Backup</h4>
<div class="outline-text-4" id="text-3-4-4">
<pre class="example" id="orgc6f0f02">
# copy startup-config tftp  IP  FILENAME
</pre>
</div>
</div>
<div id="outline-container-orgf6f1c11" class="outline-4">
<h4 id="orgf6f1c11"><span class="section-number-4">3.4.5.</span> Restore</h4>
<div class="outline-text-4" id="text-3-4-5">
<pre class="example" id="org9f592a4">
# copy tftp running-config  IP  FILENAME
</pre>
</div>
</div>
</div>
<div id="outline-container-org8dafee8" class="outline-3">
<h3 id="org8dafee8"><span class="section-number-3">3.5.</span> IP</h3>
<div class="outline-text-3" id="text-3-5">
</div>
<div id="outline-container-org7b54504" class="outline-4">
<h4 id="org7b54504"><span class="section-number-4">3.5.1.</span> Statisch</h4>
<div class="outline-text-4" id="text-3-5-1">
<pre class="example" id="org73b11a6">
(config)# vlan  VLAN
(vlan-1)# ip address  IP  SNM
</pre>
</div>
</div>
<div id="outline-container-org524ec41" class="outline-4">
<h4 id="org524ec41"><span class="section-number-4">3.5.2.</span> Dynamisch</h4>
<div class="outline-text-4" id="text-3-5-2">
<pre class="example" id="org69c6468">
(config)# vlan 1
(vlan-1)# ip dhcp-bootp
</pre>
</div>
</div>
</div>
<div id="outline-container-org8fbdf5c" class="outline-3">
<h3 id="org8fbdf5c"><span class="section-number-3">3.6.</span> SSH Zugang</h3>
<div class="outline-text-3" id="text-3-6">
<pre class="example" id="org8dd6e9e">
(config)# crypto key generate ssh rsa
(config)# ip ssh
(config)# show crypto host-public-key fingerprint
</pre>
</div>
</div>
<div id="outline-container-org46bdae7" class="outline-3">
<h3 id="org46bdae7"><span class="section-number-3">3.7.</span> MAC-Address-Table</h3>
<div class="outline-text-3" id="text-3-7">
<pre class="example" id="org268c56b">
# show mac-address
</pre>
</div>
</div>
<div id="outline-container-orgee748c5" class="outline-3">
<h3 id="orgee748c5"><span class="section-number-3">3.8.</span> Mirror Port</h3>
<div class="outline-text-3" id="text-3-8">
<p>
Einstellen auf welchen Port hin gespiegelt werden soll:
</p>
<pre class="example" id="org6d649a7">
(config)# mirror-port  PORT
</pre>

<p>
Einstellen welcher Port gespiegelt werden soll:
</p>
<pre class="example" id="org6e0538a">
(config)# interface  INTERFACE
(eth-1)# monitor
</pre>

<p>
Beispiel:
</p>
<pre class="example" id="org540c5a2">
(config)# mirror-port 24
(config)# interface 1
(eth-1)# monitor
</pre>

<p>
Durch diese Befehle wird der gesamte Traffic der über den Port <code>eth-1</code> läuft, auch auf Port 24 ausgegeben.
Port 24 "überwacht" die Kommunikation von Port 1.
</p>
</div>
</div>

<div id="outline-container-orgf37598d" class="outline-3">
<h3 id="orgf37598d"><span class="section-number-3">3.9.</span> Spanning Tree</h3>
<div class="outline-text-3" id="text-3-9">
<pre class="example" id="org73efa10">
(config)# spanning-tree enable
</pre>
<pre class="example" id="org7deeef5">
(config)# spanning-tree disable
</pre>
<pre class="example" id="org8aa58d4">
# show spanning-tree
</pre>
</div>
</div>
</div>

<div id="outline-container-org71c9383" class="outline-2">
<h2 id="org71c9383"><span class="section-number-2">4.</span> <span class="todo INC">INC</span> Router (HP MSR 1003)</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org5b67e41" class="outline-3">
<h3 id="org5b67e41"><span class="section-number-3">4.1.</span> <span class="todo TBV">TBV</span> Modes</h3>
<div class="outline-text-3" id="text-4-1">
<pre class="example" id="org5a4a06c">
&lt;&gt; system-view
[]
</pre>
<pre class="example" id="orgff7bb5f">
[] exit
&lt;&gt;
</pre>
</div>
</div>
<div id="outline-container-org943af50" class="outline-3">
<h3 id="org943af50"><span class="section-number-3">4.2.</span> Dateien und Verzeichnise</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Aktuelles Verzeichnis anzeigen:
</p>
<pre class="example" id="orgbf333b7">
&lt;&gt; pwd
</pre>
<p>
Verzeichnisinhalt anzeigen:
</p>
<pre class="example" id="org50c1b66">
&lt;&gt; dir
</pre>
<p>
Verzeichnis wechseln:
</p>
<pre class="example" id="org5b29c06">
&lt;&gt; cd  DIRECTORY
</pre>
<p>
Neues Verzeichnis erstellen:
</p>
<pre class="example" id="orgaeb08d1">
&lt;&gt; mkdir  DIRECTORY
</pre>
<p>
Dateien kopieren:
</p>
<pre class="example" id="org1f432d2">
&lt;&gt; copy  SOURCE-FILENAME  DESTINATION-FILENAME
</pre>
<p>
Dateien umbenennen/verschieben:
</p>
<pre class="example" id="org6f336ca">
&lt;&gt; move  SOURCE-FILENAME  DESTINATION-FILENAME
</pre>
<p>
Dateien löschen:
</p>
<pre class="example" id="org2f73662">
&lt;&gt; delete  FILENAME
</pre>
<p>
Verzeichnise löschen:
</p>
<pre class="example" id="orge6a2451">
&lt;&gt; rmdir  DIRECTORY
</pre>
</div>
</div>

<div id="outline-container-org60e3612" class="outline-3">
<h3 id="org60e3612"><span class="section-number-3">4.3.</span> TTL-Expires</h3>
<div class="outline-text-3" id="text-4-3">
<pre class="example" id="orgc3f85c9">
[] ip ttl-expires enable
</pre>
</div>
</div>

<div id="outline-container-org8cd3f19" class="outline-3">
<h3 id="org8cd3f19"><span class="section-number-3">4.4.</span> SSH Zugang</h3>
<div class="outline-text-3" id="text-4-4">
<pre class="example" id="org72283fc">
[] local-user  USERNAME
[USERNAME] password simple  PASSWORD
[USERNAME] authorization-attribute user-role network-admin
[USERNAME] service-type ssh
[USERNAME] exit
[] public-key local create rsa
[] ssh server enable
[] line vty 0 63
[line-vty0-63] authentication-mode scheme
</pre>
<p>
Beim Verbinden via PuTTY wird man nach dem <code>USERNAME</code> und dem <code>PASSWORD</code> gefragt.
Beim Verbinden über eine Shell (<i>cmd</i>, <i>pwsh</i>, <i>bash</i>, &#x2026;) muss man den <code>USERNAME</code> gleich mitgeben.
Der Befehl lautet dann: <code>ssh USERNAME@IP</code> (Beispiel: <code>ssh user@192.168.42.254</code>).
</p>
</div>
</div>


<div id="outline-container-orgf838385" class="outline-3">
<h3 id="orgf838385"><span class="section-number-3">4.5.</span> <span class="todo TBV">TBV</span> Config File</h3>
<div class="outline-text-3" id="text-4-5">
</div>
<div id="outline-container-org97125fb" class="outline-4">
<h4 id="org97125fb"><span class="section-number-4">4.5.1.</span> Anzeigen</h4>
<div class="outline-text-4" id="text-4-5-1">
<pre class="example" id="org6ddfeed">
&lt;&gt; display current-configuration
</pre>
</div>
</div>
<div id="outline-container-orgf76e080" class="outline-4">
<h4 id="orgf76e080"><span class="section-number-4">4.5.2.</span> Zurücksetzen</h4>
<div class="outline-text-4" id="text-4-5-2">
<pre class="example" id="orgbbb0033">
&lt;&gt; delete startup.cfg
</pre>
<p>
Anschließend muss der Router mittels <code>&lt;&gt; reboot</code> neugestartet werden.
</p>

<p>
<b>Achtung!</b> Genau lesen, was man gefragt wird!
</p>
</div>
</div>

<div id="outline-container-org12e674f" class="outline-4">
<h4 id="org12e674f"><span class="section-number-4">4.5.3.</span> Speichern</h4>
<div class="outline-text-4" id="text-4-5-3">
<pre class="example" id="orgb8f87c8">
&lt;&gt; write main
</pre>
</div>
</div>
<div id="outline-container-org95b45e1" class="outline-4">
<h4 id="org95b45e1"><span class="section-number-4">4.5.4.</span> Backup</h4>
<div class="outline-text-4" id="text-4-5-4">
<p>
(via TFTP)
</p>
<pre class="example" id="orgb84d069">
&lt;&gt; backup startup-configuration to  IP  FILENAME
</pre>
</div>
</div>
</div>

<div id="outline-container-org77b9b78" class="outline-3">
<h3 id="org77b9b78"><span class="section-number-3">4.6.</span> <span class="todo TBV">TBV</span> Interfaces</h3>
<div class="outline-text-3" id="text-4-6">
<p>
Im folgenden ist öfters von <code>A/B</code> die rede. Dies sind Platzhalter für konkrete Interfaces wie beispielsweise <code>0/1</code>.
</p>

<p>
<code>GigabitEthernet A/B</code> sollte also durch das gewünschte Interface (zum Beispiel: <code>GigabitEthernet 0/1</code>) ersetzt werden.
</p>
</div>

<div id="outline-container-org7ead16d" class="outline-4">
<h4 id="org7ead16d"><span class="section-number-4">4.6.1.</span> Informationen anzeigen</h4>
<div class="outline-text-4" id="text-4-6-1">
<pre class="example" id="org0c01527">
[] show interface brief
</pre>
</div>
</div>

<div id="outline-container-orgeed72fa" class="outline-4">
<h4 id="orgeed72fa"><span class="section-number-4">4.6.2.</span> Mode</h4>
<div class="outline-text-4" id="text-4-6-2">
<pre class="example" id="org0893c99">
[] interface gigabitethernet A/B
[GigabitEthernetA/B] port link-mode  MODUS
</pre>
<p>
Wobei <code>MODUS</code> entweder <code>bridge</code> oder <code>route</code> sein soll.
</p>
</div>
</div>

<div id="outline-container-orgb9c76a8" class="outline-4">
<h4 id="orgb9c76a8"><span class="section-number-4">4.6.3.</span> IP</h4>
<div class="outline-text-4" id="text-4-6-3">
<pre class="example" id="org61d22b2">
[] interface gigabitethernet A/B
[GigabitEthernetA/B] ip address  IP  SNM
</pre>
</div>
</div>
</div>

<div id="outline-container-org9235344" class="outline-3">
<h3 id="org9235344"><span class="section-number-3">4.7.</span> Routing</h3>
<div class="outline-text-3" id="text-4-7">
</div>
<div id="outline-container-org66ae342" class="outline-4">
<h4 id="org66ae342"><span class="section-number-4">4.7.1.</span> Statisch</h4>
<div class="outline-text-4" id="text-4-7-1">
<pre class="example" id="orgb8ccfd9">
[] ip route-static  DESTINATION-NETID  DESTINATION-SNM  NEXTHOP
</pre>
<p>
Möchte man einen <i>Default Gateway</i> einrichten nimmt man für die <code>DESTINATION-NETID</code> und die <code>DESTINATION-SNM</code> jeweils <code>0.0.0.0</code>.
</p>

<p>
Um alle <b>statischen</b> Routen auf einmal zu löschen gibt es folgenden Befehl:
</p>
<pre class="example" id="orgfc104b2">
[] delete static-routes all
</pre>
</div>
</div>

<div id="outline-container-orgf88cfcf" class="outline-4">
<h4 id="orgf88cfcf"><span class="section-number-4">4.7.2.</span> Dynamisch</h4>
<div class="outline-text-4" id="text-4-7-2">
</div>
<ol class="org-ol">
<li><a id="orgad9d96b"></a>RIPv2<br />
<div class="outline-text-5" id="text-4-7-2-1">
<pre class="example" id="org443d214">
[] rip
[rip] version 2
[rip] network  CONNECTED-NET-ID  CONNECTED-NET-SNM
[rip] network  CONNECTED-NET-ID  CONNECTED-NET-SNM
      ...
</pre>
</div>
</li>

<li><a id="org997ca23"></a><span class="todo TBV">TBV</span> OSPF<br />
<div class="outline-text-5" id="text-4-7-2-2">
<pre class="example" id="org9c9d27c">
[] router id  ROUTER-ID
[] ospf
[ospf] area  AREA-ID
[ospf-AREA-ID] network  CONNECTED-NET-ID  CONNECTED-SNM
[ospf-AREA-ID] network  CONNECTED-NET-ID  CONNECTED-SNM
               ...
</pre>

<pre class="example" id="org60e0656">
&lt;&gt; display ospf interface gigabitethernet  A/B
</pre>
</div>
</li>
</ol>
</div>

<div id="outline-container-org5d49bf3" class="outline-4">
<h4 id="org5d49bf3"><span class="section-number-4">4.7.3.</span> Routing Tabelle anzeigen</h4>
<div class="outline-text-4" id="text-4-7-3">
<pre class="example" id="org5a32502">
[] show ip routing-table
</pre>
</div>
</div>
</div>
<div id="outline-container-org0d01f77" class="outline-3">
<h3 id="org0d01f77"><span class="section-number-3">4.8.</span> <span class="todo TBV">TBV</span> NAT, PAT</h3>
<div class="outline-text-3" id="text-4-8">
</div>
<div id="outline-container-orgc1c31ff" class="outline-4">
<h4 id="orgc1c31ff"><span class="section-number-4">4.8.1.</span> 1:1 statisches NAT</h4>
<div class="outline-text-4" id="text-4-8-1">
<pre class="example" id="orga856c2d">
[] nat static outbound  LAN-HOST-IP  WAN-INTERFACE-IP
[] interface  WAN-INTERFACE
[WAN-INTERFACE] nat static enable
</pre>
</div>
</div>

<div id="outline-container-orga2061c3" class="outline-4">
<h4 id="orga2061c3"><span class="section-number-4">4.8.2.</span> Dynamisches NAT</h4>
<div class="outline-text-4" id="text-4-8-2">
<pre class="example" id="orgdda7d69">
[] nat address-group 0
[address-group-0] address  LOW-WAN-IP  HIGH-WAN-IP
[address-group-0] exit
[] acl basic 2000
[access-list-2000] rule permit source  LAN-NET-ID  LAN-WILDCARD-MASK
[access-list-2000] exit
[] interface  WAN-INTERFACE
[WAN-INTERFACE] nat outbound 2000 address-group 0
</pre>
</div>
</div>


<div id="outline-container-org838e25d" class="outline-4">
<h4 id="org838e25d"><span class="section-number-4">4.8.3.</span> PAT</h4>
<div class="outline-text-4" id="text-4-8-3">
<pre class="example" id="orga523cf5">
[] acl basic 2000
[access-list-2000] rule permit source  LAN-NET-ID  LAN-WILDCARD-MASK
[access-list-2000] exit
[] interface WAN_INTERFACE
[WAN-INTERFACE] nat outbound 2000
</pre>
</div>
</div>

<div id="outline-container-org23c8bc1" class="outline-4">
<h4 id="org23c8bc1"><span class="section-number-4">4.8.4.</span> Anzeigen, Debugging</h4>
<div class="outline-text-4" id="text-4-8-4">
<pre class="example" id="orga15cb7e">
[] display nat all
</pre>

<pre class="example" id="orgd381c5a">
[] display nat outbound
</pre>

<pre class="example" id="org7fe25a7">
[] terminal logging level debugging
[] debugging nat packet
[] terminal monitor
</pre>
<p>
Zum stoppen des loggings einfach <code>no terminal monitor</code> eingeben.
</p>
</div>
</div>
</div>
</div>


<div id="outline-container-org826d905" class="outline-2">
<h2 id="org826d905"><span class="section-number-2">5.</span> Credits</h2>
<div class="outline-text-2" id="text-5">
<p>
Vielen Dank an alle Kolleg:innen und Schüler:innen die sich bei der Erstellung und Verbesserung dieser Doku beteiligt haben!
</p>

<p>
Diese Doku basiert ursprünglich (und zu großen Teilen) auf einer Doku die von Hansjörg Agerer und seinen Schüler:innen erstellt wurde.
</p>

<p>
Special Thanks an:
</p>
<pre class="example" id="orgd010a61">
Hansjörg Agerer
Martin Amann
Alexandra Aurora Göttlicher
Marcel Haidner
Alexander Kircher
Thomas Wolf
Sebastian Kohl
Benjamin Lackner
</pre>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Autor: Lukas Singer</p>
<p class="date">Created: 2024-06-14 Fr 10:20</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
